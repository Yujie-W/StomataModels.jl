<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · StomataModels</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">StomataModels</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Stomatal-model-schemes"><span>Stomatal model schemes</span></a></li><li><a class="tocitem" href="#CanopyLayer"><span>CanopyLayer</span></a></li><li><a class="tocitem" href="#Stomatal-conductance"><span>Stomatal conductance</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Yujie-W/StomataModels.jl/blob/master/docs/src/API.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="StomtaModels-API"><a class="docs-heading-anchor" href="#StomtaModels-API">StomtaModels API</a><a id="StomtaModels-API-1"></a><a class="docs-heading-anchor-permalink" href="#StomtaModels-API" title="Permalink"></a></h1><h2 id="Stomatal-model-schemes"><a class="docs-heading-anchor" href="#Stomatal-model-schemes">Stomatal model schemes</a><a id="Stomatal-model-schemes-1"></a><a class="docs-heading-anchor-permalink" href="#Stomatal-model-schemes" title="Permalink"></a></h2><p>The StomataModels module relies mainly on Photosynthesis and PlantHydraulics     modules to predict stomatal behavior from plant physiology. This module has     both empirical and optimal stomatal models. These stomatal models are     abstractized to an abstract <a href="#StomataModels.AbstractStomatalModel"><code>AbstractStomatalModel</code></a>, which further     has subtypes <a href="#StomataModels.EmpiricalStomatalModel"><code>EmpiricalStomatalModel</code></a> and     <a href="#StomataModels.OptimizationStomatalModel"><code>OptimizationStomatalModel</code></a>.</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.AbstractStomatalModel" href="#StomataModels.AbstractStomatalModel"><code>StomataModels.AbstractStomatalModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">type AbstractStomatalModel</code></pre><p>Hierarchy of the <code>AbstractStomatalModel</code>:</p><ul><li><a href="#StomataModels.EmpiricalStomatalModel"><code>EmpiricalStomatalModel</code></a></li><li><a href="#StomataModels.OptimizationStomatalModel"><code>OptimizationStomatalModel</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L20-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.EmpiricalStomatalModel" href="#StomataModels.EmpiricalStomatalModel"><code>StomataModels.EmpiricalStomatalModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">type EmpiricalStomatalModel</code></pre><p>Hierarchy of the <code>EmpiricalStomatalModel</code>:</p><ul><li><a href="#StomataModels.ESMBallBerry"><code>ESMBallBerry</code></a></li><li><a href="#StomataModels.ESMGentine"><code>ESMGentine</code></a></li><li><a href="#StomataModels.ESMLeuning"><code>ESMLeuning</code></a></li><li><a href="#StomataModels.ESMMedlyn"><code>ESMMedlyn</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L32-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.OptimizationStomatalModel" href="#StomataModels.OptimizationStomatalModel"><code>StomataModels.OptimizationStomatalModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">type OptimizationStomatalModel</code></pre><p>Hierarchy of the <code>OptimizationStomatalModel</code>:</p><ul><li><a href="#StomataModels.OSMEller"><code>OSMEller</code></a></li><li><a href="#StomataModels.OSMSperry"><code>OSMSperry</code></a></li><li><a href="#StomataModels.OSMWang"><code>OSMWang</code></a></li><li><a href="#StomataModels.OSMWAP"><code>OSMWAP</code></a></li><li><a href="#StomataModels.OSMWAPMod"><code>OSMWAPMod</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L139-L148">source</a></section></article><p>Currently, the StomataModels module has four empirical model schemes, and they     are</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.ESMBallBerry" href="#StomataModels.ESMBallBerry"><code>StomataModels.ESMBallBerry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ESMBallBerry{FT}</code></pre><p>An empirical model parameter set type for Ball-Berry type model. The equation used for Ball-Berry type model is</p><p class="math-container">\[gs = g0 + g1 ⋅ RH ⋅ \dfrac{A}{Cs}\]</p><p><strong>Fields</strong></p><ul><li><p><code>g0::Any</code></p><p>minimal stomatal conductance g0 <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g1::Any</code></p><p>slope of conductance-photosynthesis correlation <code>[unitless]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L46-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.ESMGentine" href="#StomataModels.ESMGentine"><code>StomataModels.ESMGentine</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ESMGentine{FT}</code></pre><p>An empirical model parameter set type for Gentine type model. The equation used for Gentine type model is</p><p class="math-container">\[gs = g0 + g1 ⋅ \dfrac{k_{leaf}}{k_{max}} ⋅ \dfrac{A}{Ca}.\]</p><p>Note it that the Gentine model does not require for a <code>β</code> function to tune the     soil drought response, but the use of <code>k_leaf</code> also does not permit     post-drought stomatal response unless <code>k_leaf</code> can be recovered.</p><p><strong>Fields</strong></p><ul><li><p><code>g0::Any</code></p><p>minimal stomatal conductance g0 <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g1::Any</code></p><p>slope of conductance-photosynthesis correlation <code>[unitless]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L68-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.ESMLeuning" href="#StomataModels.ESMLeuning"><code>StomataModels.ESMLeuning</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ESMLeuning{FT}</code></pre><p>An empirical model parameter set type for Leuning type model. The equation used for Leuning type model is</p><p class="math-container">\[gs = g0 + g1 ⋅ \dfrac{A}{Cs - Γ^{*}} ⋅ \dfrac{1}{1 + \dfrac{VPD}{d0}}\]</p><p><strong>Fields</strong></p><ul><li><p><code>g0::Any</code></p><p>minimal stomatal conductance g0 <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g1::Any</code></p><p>slope of conductance-photosynthesis correlation <code>[unitless]</code></p></li><li><p><code>d0::Any</code></p><p>fitting parameter of d/d0 below the fraction, same unit as vpd <code>[Pa]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L93-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.ESMMedlyn" href="#StomataModels.ESMMedlyn"><code>StomataModels.ESMMedlyn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ESMMedlyn{FT}</code></pre><p>An empirical model parameter set type for Medlyn type model. The equation used in Medlyn type model is</p><p class="math-container">\[gs = g0 + 1.6 ⋅ \left( 1 + \dfrac{g1}{\sqrt{VPD}} \right) ⋅ \dfrac{A}{Ca}\]</p><p><strong>Fields</strong></p><ul><li><p><code>g0::Any</code></p><p>minimal stomatal conductance g0 <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g1::Any</code></p><p>slope of conductance-photosynthesis correlation <code>[Pa⁽⁵⁾]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L117-L128">source</a></section></article><p>All the empirical models rely on beta functions to make corrections over     stomatal conductance to account for the stomatal closure with drier soil.     We have the following prescribed beta function types, and they are:</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.AbstractBetaFunction" href="#StomataModels.AbstractBetaFunction"><code>StomataModels.AbstractBetaFunction</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractBetaFunction{FT}</code></pre><p>Hierachy of AbstractBetaFunction:</p><ul><li><a href="#StomataModels.AbstractBetaG"><code>AbstractBetaG</code></a><ul><li><a href="#StomataModels.BetaGLinearKleaf"><code>BetaGLinearKleaf</code></a></li><li><a href="#StomataModels.BetaGLinearKsoil"><code>BetaGLinearKsoil</code></a></li><li><a href="#StomataModels.BetaGLinearPleaf"><code>BetaGLinearPleaf</code></a></li><li><a href="#StomataModels.BetaGLinearPsoil"><code>BetaGLinearPsoil</code></a></li><li><a href="#StomataModels.BetaGLinearSWC"><code>BetaGLinearSWC</code></a></li></ul></li><li><a href="#StomataModels.AbstractBetaV"><code>AbstractBetaV</code></a><ul><li><a href="#StomataModels.BetaVLinearKleaf"><code>BetaVLinearKleaf</code></a></li><li><a href="#StomataModels.BetaVLinearPleaf"><code>BetaVLinearPleaf</code></a></li><li><a href="#StomataModels.BetaVLinearPsoil"><code>BetaVLinearPsoil</code></a></li><li><a href="#StomataModels.BetaVLinearSWC"><code>BetaVLinearSWC</code></a></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L6-L21">source</a></section></article><p>Some beta functions make correction over the <code>g1</code> parameter as in the empitical     models, and they are:</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.AbstractBetaG" href="#StomataModels.AbstractBetaG"><code>StomataModels.AbstractBetaG</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractBetaG{FT}</code></pre><p>Hierachy of AbstractBetaG:</p><ul><li><a href="#StomataModels.BetaGLinearKleaf"><code>BetaGLinearKleaf</code></a></li><li><a href="#StomataModels.BetaGLinearPleaf"><code>BetaGLinearPleaf</code></a></li><li><a href="#StomataModels.BetaGLinearPsoil"><code>BetaGLinearPsoil</code></a></li><li><a href="#StomataModels.BetaGLinearSWC"><code>BetaGLinearSWC</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L36-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaGLinearKleaf" href="#StomataModels.BetaGLinearKleaf"><code>StomataModels.BetaGLinearKleaf</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct BetaGLinearKleaf{FT}</code></pre><p>Linear β function for g1 based on leaf hydraulic conductance.</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L50-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaGLinearKsoil" href="#StomataModels.BetaGLinearKsoil"><code>StomataModels.BetaGLinearKsoil</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct BetaGLinearKsoil{FT}</code></pre><p>Linear β function for g1 based on soil hydraulic conductance.</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L63-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaGLinearPleaf" href="#StomataModels.BetaGLinearPleaf"><code>StomataModels.BetaGLinearPleaf</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BetaGLinearPleaf{FT}</code></pre><p>Linear β function for g1 based on soil water potential.</p><p><strong>Fields</strong></p><ul><li><p><code>p_max::Any</code></p><p>Upper bound of Pleaf <code>[MPa]</code></p></li><li><p><code>p_min::Any</code></p><p>Lower bound of Pleaf <code>[MPa]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L76-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaGLinearPsoil" href="#StomataModels.BetaGLinearPsoil"><code>StomataModels.BetaGLinearPsoil</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BetaGLinearPsoil{FT}</code></pre><p>Linear β function for g1 based on soil water potential.</p><p><strong>Fields</strong></p><ul><li><p><code>p_max::Any</code></p><p>Upper bound of Psoil <code>[MPa]</code></p></li><li><p><code>p_min::Any</code></p><p>Lower bound of Psoil <code>[MPa]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L94-L101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaGLinearSWC" href="#StomataModels.BetaGLinearSWC"><code>StomataModels.BetaGLinearSWC</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BetaGLinearSWC{FT}</code></pre><p>Linear β function for g1 based on soil water content.</p><p><strong>Fields</strong></p><ul><li><p><code>swc_max::Any</code></p><p>Upper bound of SWC</p></li><li><p><code>swc_min::Any</code></p><p>Lower bound of SWC</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L112-L119">source</a></section></article><p>Some beta functions make correction over the photosynthetic capacity as in the     Photosynthesis module, and they are:</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.AbstractBetaV" href="#StomataModels.AbstractBetaV"><code>StomataModels.AbstractBetaV</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractBetaV{FT}</code></pre><p>Hierachy of AbstractBetaV:</p><ul><li><a href="#StomataModels.BetaVLinearKleaf"><code>BetaVLinearKleaf</code></a></li><li><a href="#StomataModels.BetaVLinearPleaf"><code>BetaVLinearPleaf</code></a></li><li><a href="#StomataModels.BetaVLinearPsoil"><code>BetaVLinearPsoil</code></a></li><li><a href="#StomataModels.BetaVLinearSWC"><code>BetaVLinearSWC</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L139-L147">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaVLinearKleaf" href="#StomataModels.BetaVLinearKleaf"><code>StomataModels.BetaVLinearKleaf</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct BetaVLinearKleaf{FT}</code></pre><p>Linear β function for Vcmax based on leaf hydraulic conductance.</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L153-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaVLinearKsoil" href="#StomataModels.BetaVLinearKsoil"><code>StomataModels.BetaVLinearKsoil</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct BetaVLinearKsoil{FT}</code></pre><p>Linear β function for Vcmax based on soil hydraulic conductance.</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L166-L173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaVLinearPleaf" href="#StomataModels.BetaVLinearPleaf"><code>StomataModels.BetaVLinearPleaf</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BetaVLinearPleaf{FT}</code></pre><p>Linear β function for Vcmax based on soil water potential.</p><p><strong>Fields</strong></p><ul><li><p><code>p_max::Any</code></p><p>Upper bound of Pleaf <code>[MPa]</code></p></li><li><p><code>p_min::Any</code></p><p>Lower bound of Pleaf <code>[MPa]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L179-L186">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaVLinearPsoil" href="#StomataModels.BetaVLinearPsoil"><code>StomataModels.BetaVLinearPsoil</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BetaVLinearPsoil{FT}</code></pre><p>Linear β function for Vcmax based on soil water potential.</p><p><strong>Fields</strong></p><ul><li><p><code>p_max::Any</code></p><p>Upper bound of Psoil <code>[MPa]</code></p></li><li><p><code>p_min::Any</code></p><p>Lower bound of Psoil <code>[MPa]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L197-L204">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.BetaVLinearSWC" href="#StomataModels.BetaVLinearSWC"><code>StomataModels.BetaVLinearSWC</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BetaVLinearSWC{FT}</code></pre><p>Linear β function for Vcmax based on soil water content.</p><p><strong>Fields</strong></p><ul><li><p><code>swc_max::Any</code></p><p>Upper bound of SWC</p></li><li><p><code>swc_min::Any</code></p><p>Lower bound of SWC</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/beta.jl#L215-L222">source</a></section></article><p>The beta functions are generalized with</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.β_factor" href="#StomataModels.β_factor"><code>StomataModels.β_factor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">β_factor(hs::LeafHydraulics{FT},
         svc::AbstractSoilVC{FT},
         bt::AbstractBetaFunction{FT},
         p_leaf::FT,
         p_soil::FT,
         swc::FT
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate the β correction factor, given</p><ul><li><code>hs</code> <code>LeafHydraulics</code> structure</li><li><code>svc</code> Soil vulnerability curve</li><li><code>bt</code> <a href="#StomataModels.AbstractBetaFunction"><code>AbstractBetaFunction</code></a> type struct</li><li><code>p_leaf</code> Leaf water potential <code>[MPa]</code></li><li><code>p_soil</code> Soil water potential <code>[MPa]</code></li><li><code>swc</code> Soil water content</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/beta.jl#L6-L22">source</a></section></article><p>The StomataModels module also contains five optimization model schemes:</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.OSMEller" href="#StomataModels.OSMEller"><code>StomataModels.OSMEller</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct OSMEller</code></pre><p>An optimization model parameter set type for Eller model. The equation used for Eller model is</p><p class="math-container">\[\dfrac{∂Θ}{∂E} = -\dfrac{∂K}{∂E} ⋅ \dfrac{A}{K}\]</p><p>where K is <span>$\dfrac{∂E}{∂P}$</span>.</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L154-L166">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.OSMSperry" href="#StomataModels.OSMSperry"><code>StomataModels.OSMSperry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct OSMSperry</code></pre><p>An optimization model parameter set type for Sperry model. The equation used for Sperry model is</p><p class="math-container">\[\dfrac{∂Θ}{∂E} = -\dfrac{∂K}{∂E} ⋅ \dfrac{A_{max}}{K_{max}}\]</p><p>where K is <span>$\dfrac{∂E}{∂P}$</span>.</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L172-L184">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.OSMWang" href="#StomataModels.OSMWang"><code>StomataModels.OSMWang</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct OSMWang</code></pre><p>An optimization model parameter set type for Eller type model. The equation used for Wang model is</p><p class="math-container">\[\dfrac{∂Θ}{∂E} = \dfrac{A}{E_{crit} - E}\]</p><p><strong>Fields</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L190-L201">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.OSMWAP" href="#StomataModels.OSMWAP"><code>StomataModels.OSMWAP</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct OSMWAP{FT}</code></pre><p>An optimization model parameter set type for Wolf-Anderegg-Pacala type model. The equation used for Wolf-Anderegg-Pacala model is</p><p class="math-container">\[\dfrac{∂Θ}{∂E} = \dfrac{2aP + b}{K}\]</p><p>where K is ∂P/∂E.</p><p><strong>Fields</strong></p><ul><li><p><code>a::Any</code></p><p>Quadratic equation parameter <code>[μmol m⁻² s⁻¹ MPa⁻²]</code></p></li><li><p><code>b::Any</code></p><p>Quadratic equation parameter <code>[μmol m⁻² s⁻¹ MPa⁻¹]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L207-L219">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.OSMWAPMod" href="#StomataModels.OSMWAPMod"><code>StomataModels.OSMWAPMod</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct OSMWAPMod{FT}</code></pre><p>An optimization model parameter set type for Wolf-Anderegg-Pacala type model,     modified by adding a photosynthesis component while set b and c = 0. The equation used for modified Wolf-Anderegg-Pacala model is</p><p class="math-container">\[\dfrac{∂Θ}{∂E} = \dfrac{aAP}{K}\]</p><p>where P is absolute value of leaf xylem pressure.</p><p><strong>Fields</strong></p><ul><li><p><code>a::Any</code></p><p>Quadratic equation parameter <code>[mol mol⁻¹ MPa⁻¹]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/stomatalmodel.jl#L230-L243">source</a></section></article><h2 id="CanopyLayer"><a class="docs-heading-anchor" href="#CanopyLayer">CanopyLayer</a><a id="CanopyLayer-1"></a><a class="docs-heading-anchor-permalink" href="#CanopyLayer" title="Permalink"></a></h2><p>The StomataModels module is designed for multi-layer canopies, and each canopy     has multiple leaves. The stomatal behaviors are modeled per layer basis,     and the layer may contain any number of leaves starting from 1.     Photosynthesis-related information is stored in <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a>     struct, but be aware that the leaves have uniform photosynthetic parameters     and temperature (conductances are different in response to light     environment).</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.CanopyLayer" href="#StomataModels.CanopyLayer"><code>StomataModels.CanopyLayer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct CanopyLayer{FT}</code></pre><p>Struct to store leaf information (multi-dimensional).</p><p><strong>Fields</strong></p><ul><li><p><code>ps::ClimaCache.Leaf</code></p><p>leaf photosynthesis system</p></li><li><p><code>ps_m::ClimaCache.Leaf</code></p><p>Memory leaf photosynthesis system</p></li><li><p><code>LA::AbstractFloat</code></p><p>Total leaf area <code>[m²]</code></p></li><li><p><code>LAI::AbstractFloat</code></p><p>Leaf area index in the layer</p></li><li><p><code>tLAI::AbstractFloat</code></p><p>Total leaf area index in the layer</p></li><li><p><code>APAR_m::AbstractFloat</code></p><p>Memory APAR <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>envir_m::ClimaCache.AirLayer</code></p><p>Memory environment</p></li><li><p><code>n_leaf::Int64</code></p></li><li><p><code>H::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Sensible Heat Flux <code>[W m⁻²]</code></p></li><li><p><code>LE::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Latent Heat Flux <code>[W m⁻²]</code></p></li><li><p><code>Rn::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Net Radiation Balance <code>[W m⁻²]</code></p></li><li><p><code>LV::AbstractFloat</code></p><p>Latent Heat of evaporation <code>[J mol⁻¹]</code></p></li><li><p><code>T::AbstractFloat</code></p><p>Temperature <code>[K]</code></p></li><li><p><code>T_old::AbstractFloat</code></p><p>Old temperature <code>[K]</code></p></li><li><p><code>width::AbstractFloat</code></p><p>Leaf width <code>[m]</code></p></li><li><p><code>g_bc::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Boundary layer conductance to CO₂ <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_bh::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Boundary layer conductance to heat <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_bw::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Boundary layer conductance to H₂O <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_lc::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Leaf diffusive conductance to water CO₂ <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_lw::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Leaf diffusive conductance to water H₂O <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_m::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Mesophyll conductance for CO₂ <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_sc::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Stomatal conductance to water CO₂ <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_sw::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Stomatal conductance to water H₂O <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_ias_c::AbstractFloat</code></p><p>Gias correction constant</p></li><li><p><code>g_ias_e::AbstractFloat</code></p><p>Gias correction exponent</p></li><li><p><code>g_max::AbstractFloat</code></p><p>Maximal leaf diffusive conductance <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_max25::AbstractFloat</code></p><p>Maximal leaf diffusive conductance at 298.15 K <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_min::AbstractFloat</code></p><p>Minimal leaf diffusive conductance <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>g_min25::AbstractFloat</code></p><p>Minimal leaf diffusive conductance at 298.15 K <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>p_i::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Leaf internal CO₂ partial pressure <code>[Pa]</code></p></li><li><p><code>p_s::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Leaf surface CO₂ partial pressure <code>[Pa]</code></p></li><li><p><code>p_sat::AbstractFloat</code></p><p>Leaf saturation vapor pressure <code>[Pa]</code></p></li><li><p><code>Ac::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>RubisCO limited photosynthetic rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>Aj::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Light limited photosynthetic rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>Ag::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Gross photosynthetic rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>An::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Net photosynthetic rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>Ap::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Product limited photosynthetic rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>J::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Electron transport <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>J_pot::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Potential Electron Transport Rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>e2c::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Total efficiency, incl. photorespiration <code>[mol CO₂ mol⁻¹ e-]</code></p></li><li><p><code>Fm′::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>light adapted yield (<code>Kp=0</code>)</p></li><li><p><code>Fo′::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>light-adapted fluorescence yield in the dark (<code>Kp=max</code>)</p></li><li><p><code>Ja::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Actual electron transport rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>NPQ::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Non-Photochemical quenching</p></li><li><p><code>qQ::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Photochemical quenching</p></li><li><p><code>qE::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>energy quenching</p></li><li><p><code>φ::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>PSII yield</p></li><li><p><code>φs::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Steady-state (light-adapted) yield (aka Fs)</p></li><li><p><code>Fm::AbstractFloat</code></p><p>dark adapted yield (<code>Kp=0</code>)</p></li><li><p><code>Fo::AbstractFloat</code></p><p>dark-adapted fluorescence yield (<code>Kp=max</code>)</p></li><li><p><code>APAR::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Absorbed photosynthetic active radiation <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>LAIx::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Leaf area fractions</p></li><li><p><code>a_max::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Maximal photosynthetic rate <code>[μmol m⁻² s⁻¹]</code></p></li><li><p><code>e::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>Flow rate <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>ec::AbstractFloat</code></p><p>Critical flow rate <code>[mol m⁻² s⁻¹]</code></p></li><li><p><code>kr_max::AbstractFloat</code></p><p>Maximal hydraulic conductance ratio</p></li><li><p><code>p_ups::AbstractFloat</code></p><p>Base xylem pressre <code>[MPa]</code></p></li><li><p><code>p_old::AbstractFloat</code></p><p>Base xylem pressre memory <code>[MPa]</code></p></li><li><p><code>ff::AbstractFloat</code></p><p>Fitness factor for nighttime stomtal conductance</p></li><li><p><code>τ_esm::AbstractFloat</code></p><p>τ for empirical stomatal models <code>[-]</code>, Δg/Δt = (g_ss - gsw) / τ</p></li><li><p><code>τ_osm::AbstractFloat</code></p><p>τ for optimal stomatal models <code>[μmol⁻¹]</code>, Δg/Δt = (∂A/∂E - ∂Θ/∂E) * τ</p></li><li><p><code>τ_noc::AbstractFloat</code></p><p>τ for nighttime optimal stomatal models <code>[μmol⁻¹]</code></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/canopylayer.jl#L6-L13">source</a></section></article><h2 id="Stomatal-conductance"><a class="docs-heading-anchor" href="#Stomatal-conductance">Stomatal conductance</a><a id="Stomatal-conductance-1"></a><a class="docs-heading-anchor-permalink" href="#Stomatal-conductance" title="Permalink"></a></h2><p>For empirical stomatal models, the stomatal conductance is computed as the     intercept of two functions: an empirical function that describe stomatal     responses to the physiological and environmental cues and an function that     follows the diffusion nature of H₂O and CO₂. The abstractized function for     the empirical correlation is</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.stomatal_conductance" href="#StomataModels.stomatal_conductance"><code>StomataModels.stomatal_conductance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stomatal_conductance(
            model::EmpiricalStomatalModel{FT},
            leaf::Leaf{FT},
            envir::AirLayer{FT},
            β::FT
) where {FT&lt;:AbstractFloat}
stomatal_conductance(
            model::EmpiricalStomatalModel{FT},
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            β::FT
) where {FT&lt;:AbstractFloat}
stomatal_conductance(
            model::EmpiricalStomatalModel{FT},
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            β::FT,
            ind::Int
) where {FT&lt;:AbstractFloat}</code></pre><p>Steady state gsw from empirical approach given</p><ul><li><code>model</code> <a href="#StomataModels.EmpiricalStomatalModel"><code>EmpiricalStomatalModel</code></a> type empirical model parameter set</li><li><code>leaf</code> [<code>Leaf</code>] type struct</li><li><code>canopyi</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type struct</li><li><code>envir</code> [<code>AirLayer</code>] type struct</li><li><code>β</code> Correction factor over the g1 part of an empirical model</li><li><code>ind</code> Nth leaf in the canopy layer</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/empirical.jl#L6-L34">source</a></section></article><p>For optimization stomatal models, the stomatal conductance is computed as the     point where the marginal carbon gains equals the marginal carbon risk. The     marginal carbon gain and risk are generally numerically computed by     marginally increasing transpiration rate.</p><p>This module uses ConstrainedRootSolver module to iterate through the two     functions to find the solution. The aim is to find the stomatal conductance     when the <a href="#StomataModels.solution_diff!"><code>solution_diff!</code></a> function equals 0. The     <a href="#StomataModels.solution_diff!"><code>solution_diff!</code></a> returns the diference between real and     model-predicted conductances for empirical stomatal models, and the     difference between marginal carbon gain and risk for optimization stomatal     models.</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.solution_diff!" href="#StomataModels.solution_diff!"><code>StomataModels.solution_diff!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">solution_diff!(x::FT,
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            svc::AbstractSoilVC{FT},
            psoil::FT,
            swc::FT,
            envir::AirLayer{FT},
            sm::OptimizationStomatalModel{FT},
            bt::AbstractBetaFunction{FT},
            mode::GlcDrive,
            ind::Int
) where {FT&lt;:AbstractFloat}
solution_diff!(x::FT,
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            envir::AirLayer{FT},
            sm::AbstractStomatalModel{FT},
            mode::AbstractDrive,
            ind::Int
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate the difference to be minimized for a given</p><ul><li><code>x</code> Assumed leaf diffusive conductance or stomatal conductance, depending on   <code>mode</code></li><li><code>canopyi</code><a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type struct</li><li><code>hs</code> Leaf hydraulic system</li><li><code>psoil</code> Soil water potential <code>[MPa]</code></li><li><code>swc</code> Soil water content</li><li><code>envir</code>[<code>AirLayer</code>] type struct</li><li><code>sm</code> <a href="#StomataModels.EmpiricalStomatalModel"><code>EmpiricalStomatalModel</code></a> or <a href="#StomataModels.OptimizationStomatalModel"><code>OptimizationStomatalModel</code></a></li><li><code>bt</code> <a href="#StomataModels.AbstractBetaFunction"><code>AbstractBetaFunction</code></a> type struct</li><li><code>mode</code> <a href="#StomataModels.GlcDrive"><code>GlcDrive</code></a> or <a href="#StomataModels.GswDrive"><code>GswDrive</code></a> mode</li><li><code>ind</code> Nth leaf in the canopy layer</li></ul><p>The former function works for all empirical stomatal models, and the latter     works for all optimization based models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/solution.jl#L7-L44">source</a></section></article><p>In the <a href="#StomataModels.solution_diff!"><code>solution_diff!</code></a> function, leaf photosynthetic rates is modeled     using <a href="#StomataModels.gas_exchange!"><code>gas_exchange!</code></a>, which calculates the gas exchange     rates from a known total leaf diffusive conductance using     <a href="#StomataModels.GlcDrive"><code>GlcDrive</code></a> mode.</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.AbstractDrive" href="#StomataModels.AbstractDrive"><code>StomataModels.AbstractDrive</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractDrive</code></pre><p>Hierarchy of AbstractDrive</p><ul><li><a href="#StomataModels.GlcDrive"><code>GlcDrive</code></a></li><li><a href="#StomataModels.GswDrive"><code>GswDrive</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/drive.jl#L6-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.GlcDrive" href="#StomataModels.GlcDrive"><code>StomataModels.GlcDrive</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct GlcDrive</code></pre><p>Gas exchange update is driven by changes in total leaf diffusive conductance to     CO₂</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/drive.jl#L18-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.GswDrive" href="#StomataModels.GswDrive"><code>StomataModels.GswDrive</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct GswDrive</code></pre><p>Gas exchange update is driven by changes in stomtal conductance to H₂O</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/types/drive.jl#L29-L33">source</a></section></article><p>However, these functions do not force stomatal conductance to stay in its     ranges. For example, the stomatal conductance solution is set to be zero if     light is lower than the compensation point. In this case, the     <a href="#StomataModels.solution_diff!"><code>solution_diff!</code></a> function has to be used along with a control     function to guarantee realistic stomatal conductance.</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.gsw_control!" href="#StomataModels.gsw_control!"><code>StomataModels.gsw_control!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gsw_control!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            ind::Int
) where {FT&lt;:AbstractFloat}
gsw_control!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT}
) where {FT&lt;:AbstractFloat}</code></pre><p>make sure g_sw is in its physiological range limited by diffusion, given</p><ul><li><code>canopyi</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type struct</li><li><code>envir</code> [<code>AirLayer</code>] type struct</li><li><code>ind</code> Nth leaf</li></ul><p>Note that this function is meant to use jointly with gas_exchange! when     computing optimal stomtal conductance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/control.jl#L6-L24">source</a></section></article><p>To facilitate the use of the StomataModels module, an abstractized function is     provided for conveniently obtaining stomatal conductance from given     environmental conditions.</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.gas_exchange!" href="#StomataModels.gas_exchange!"><code>StomataModels.gas_exchange!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gas_exchange!(
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            psoil::FT,
            swc::FT,
            envir::AirLayer{FT},
            sm::EmpiricalStomatalModel{FT},
            bt::AbstractBetaFunction{FT}
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            psoil::FT,
            swc::FT,
            envir::AirLayer{FT},
            sm::EmpiricalStomatalModel{FT},
            bt::AbstractBetaFunction{FT},
            ind::Int
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            envir::AirLayer{FT},
            sm::AbstractStomatalModel{FT}
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            envir::AirLayer{FT},
            sm::AbstractStomatalModel{FT},
            ind::Int
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            hs::TreeSimple{FT},
            envir::AirLayer{FT},
            sm::OSMWang{FT}
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            drive::GlcDrive,
            ind::Int,
            glc::FT
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            drive::GlcDrive,
            ind::Int
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            drive::GlcDrive
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            drive::GswDrive,
            ind::Int,
            gsw::FT
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            drive::GswDrive,
            ind::Int
) where {FT&lt;:AbstractFloat}
gas_exchange!(
            canopyi::CanopyLayer{FT},
            envir::AirLayer{FT},
            drive::GswDrive
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate steady state gas exchange rates, given</p><ul><li><code>canopyi</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type struct</li><li><code>hs</code> Leaf hydraulic system or TreeSimple hydraulic organism</li><li><code>envir</code> [<code>AirLayer</code>] type struct</li><li><code>sm</code> <a href="#StomataModels.EmpiricalStomatalModel"><code>EmpiricalStomatalModel</code></a> or <a href="#StomataModels.OptimizationStomatalModel"><code>OptimizationStomatalModel</code></a></li><li><code>bt</code> <a href="#StomataModels.AbstractBetaFunction"><code>AbstractBetaFunction</code></a> type struct</li><li><code>ind</code> Nth leaf in canopyi</li><li><code>drive</code> <a href="#StomataModels.GlcDrive"><code>GlcDrive</code></a> or <a href="#StomataModels.GswDrive"><code>GswDrive</code></a> drive mode</li><li><code>glc</code> Given leaf diffusive conductance to CO₂</li><li><code>gsw</code> Given stomatal conductance to H₂O</li></ul><p>Note 1: When there is no drive mode in the parameter list, the function     calculates the steady state stomatal conductance first, and then the gas     exchange rates.</p><p>Note 2: When using GlcDrive mode, gas exchange rates are computed using the     given <code>glc</code>. However, this option does not make the gsw control, so it is     not guaranteed that gsw is within the physiological range. Thus, gsw     control should be made outside this function. This option is supposed to be     used in the optimal stomatl conductance models only, because optimal     conductance can be outside the physiological stomatal conductance range.     Thus, using this option for other purposes need to be cautious. In this     case, it is recommended to use the GswDrive mode.</p><p>Note 3: When using GswDrive mode, gas exchange rates are computed using the     given <code>gsw</code>. Moreover, <code>gsw</code> control so that gsw is within the     physiological range.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/gasexchange.jl#L6-L109">source</a></section></article><p>To speed up the calculations, leaf physiological parameters are updated only     if the environmental conditions changes. For example, PAR (photosyntheis     active radiation) is constant when we iterate <a href="#StomataModels.solution_diff!"><code>solution_diff!</code></a>, and     the electron transport is only updated once. Similar to the cases of     leaf temperature and soil moisture. This kind of functions used in the     present module are</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.update_leaf_TP!" href="#StomataModels.update_leaf_TP!"><code>StomataModels.update_leaf_TP!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_leaf_TP!(
            canopyi::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            envir::AirLayer{FT}
) where {FT&lt;:AbstractFloat}</code></pre><p>Update leaf physiological parameters if temperature or pressure changes in the daytime, given</p><ul><li><code>canopyi</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type struct</li><li><code>hs</code> Leaf hydraulic system</li><li><code>envir</code> [<code>AirLayer</code>] type struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/refresh.jl#L6-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.update_leaf_AK!" href="#StomataModels.update_leaf_AK!"><code>StomataModels.update_leaf_AK!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_leaf_AK!(
        canopyi::CanopyLayer{FT},
        hs::LeafHydraulics{FT},
        envir::AirLayer{FT}
) where {FT&lt;:AbstractFloat}</code></pre><p>Update leaf maximal A and K for Sperry model, given</p><ul><li><code>canopyi</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type struct</li><li><code>envir</code> [<code>AirLayer</code>] type struct</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/refresh.jl#L101-L111">source</a></section></article><p>I&#39;d like to emphasize it here that the <a href="#StomataModels.gas_exchange!"><code>gas_exchange!</code></a>     function only applies to the case of constant leaf temperature because     leaf energy budget is not calculated, and thus     <a href="#StomataModels.gas_exchange!"><code>gas_exchange!</code></a> is only applicable to (1) known leaf     temperature, and (2) prognostically modeling the non-steady state stomatal     behaviors. As to the steady state case, leaf energy budget has to be     considered. For the prognotic stomatal conductance, it is recommended to     use <a href="#StomataModels.gas_exchange!"><code>gas_exchange!</code></a> function at <a href="#StomataModels.GswDrive"><code>GswDrive</code></a> mode.</p><p>Note it here that stomtal conductance is controlled in this function, and thus     no additional control like <a href="#StomataModels.gsw_control!"><code>gsw_control!</code></a> is required if     <a href="#StomataModels.gas_exchange!"><code>gas_exchange!</code></a> is used.</p><p>Other functions</p><article class="docstring"><header><a class="docstring-binding" id="StomataModels.dRdE" href="#StomataModels.dRdE"><code>StomataModels.dRdE</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dRdE(clayer::CanopyLayer{FT},
     envir::AirLayer{FT},
     LAI::FT
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate the marginal decrease of respiration rate, given</p><ul><li><code>clayer</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type of struct</li><li><code>envir</code> <code>AirLayer</code> type struct</li><li><code>LAI</code> Total leaf area index of whole canopy</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/nocturnal.jl#L7-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.dTdE" href="#StomataModels.dTdE"><code>StomataModels.dTdE</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dTdE(clayer::CanopyLayer{FT},
     envir::AirLayer{FT}
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate the margian decrease in leaf temperature, given</p><ul><li><code>clayer</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type of struct</li><li><code>envir</code> <code>AirLayer</code> type struct</li><li><code>LAI</code> Total leaf area index of whole canopy</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/nocturnal.jl#L30-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.dΘdE" href="#StomataModels.dΘdE"><code>StomataModels.dΘdE</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dΘdE(clayer::CanopyLayer{FT},
     sm::OSMWang{FT}(),
     g_sw::FT
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate the margian carbon cost related to nighttime transpiration, given</p><ul><li><code>clayer</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type of struct</li><li><code>sm</code> <a href="#StomataModels.OSMWang"><code>OSMWang</code></a> type stomatal model</li><li><code>g_sw</code> Given leaf level stomatal conductance</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/nocturnal.jl#L60-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.nocturnal_diff!" href="#StomataModels.nocturnal_diff!"><code>StomataModels.nocturnal_diff!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nocturnal_diff!(
            x::FT,
            clayer::CanopyLayer{FT},
            envir::AirLayer{FT},
            sm::OSMWang{FT}()
) where {FT&lt;:AbstractFloat}</code></pre><p>Calculate the difference between marginal gain and risk of nighttime     transpiration, given</p><ul><li><code>x</code> Given leaf level stomatal conductance</li><li><code>clayer</code> <a href="#StomataModels.CanopyLayer"><code>CanopyLayer</code></a> type of struct</li><li><code>envir</code> <code>AirLayer</code> type struct</li><li><code>sm</code> <a href="#StomataModels.OSMWang"><code>OSMWang</code></a> type stomatal model</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/nocturnal.jl#L94-L108">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StomataModels.prognostic_gsw!" href="#StomataModels.prognostic_gsw!"><code>StomataModels.prognostic_gsw!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">prognostic_gsw!(
            clayer::CanopyLayer{FT},
            envir::AirLayer{FT},
            sm::EmpiricalStomatalModel{FT},
            β::FT,
            Δt::FT
) where {FT&lt;:AbstractFloat}
prognostic_gsw!(
            clayer::CanopyLayer{FT},
            hs::LeafHydraulics{FT},
            envir::AirLayer{FT},
            sm::OSMWang{FT},
            Δt::FT
) where {FT&lt;:AbstractFloat}</code></pre><p>Update g_sw prognostically, given</p><ul><li><code>clayer</code> A <code>CanopyLayer</code> type struct</li><li><code>envir</code> <code>AirLayer</code> type environmental conditions</li><li><code>sm</code> <code>EmpiricalStomatalModel</code> or <code>OSMWang</code> type stomatal model</li><li><code>β</code> Tune factor to stomatal g1. 1 for AbstractBetaV mode</li><li><code>Δt</code> Time interval for prognostic stomatal conductance</li><li><code>hs</code> Leaf hydraulic system</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Yujie-W/StomataModels.jl/blob/30911ded09f979cac75492e07b9452d72245458d/src/model/prognostic.jl#L6-L29">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Thursday 10 March 2022 00:26">Thursday 10 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
